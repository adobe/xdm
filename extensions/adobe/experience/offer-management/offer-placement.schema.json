{
  "meta:license": [
    "Copyright 2018 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$schema": "http://json-schema.org/draft-06/schema#",
  "$id": "https://ns.adobe.com/experience/offer-management/offer-placement",
  "meta:abstract": false,
  "meta:extensible": true,
  "type": "object",
  "title": "Placement",
  "description": "A placement describes a location or place in a personalized message. It is used to set technical constraints for content that the personalization decision supplies. The placement also represents a request to produce certain types of metrics when an experience event is produced where this placement is involved. For instance the placement facilitates a personalized clickable image inside an email shown to an end-user. The placement may for instance request from the assembled experience that the click on its image gets reported in an experience event with a metric `https://ns.adobe.com/xdm/data/metrics/web/linkclicks` and a reference to this placement. ",
  "definitions": {
    "offer-placement": {
      "properties": {
        "@id": {
          "type": "string",
          "format": "uri-reference",
          "title": "ID",
          "description": "The unique identifier of the placement. This identifier is assigned by clients or services that use the repository and is not generated by the repository itself. This @id must be unique within a repository container for objects that are not the same, otherwise it is interpreted as referring to the same object."
        },
        "xdm:name": {
          "type": "string",
          "title": "Name",
          "description": "An assigned name for the placement to refer to it in human interactions"
        },
        "xdm:description": {
          "type": "string",
          "title": "Description",
          "description": "Placement description. It is used to convey human readable intentions on how dynamic content is used in the overall message delivery. That a certain space is a \"Banner\" in a web page is often conveyed via the description and not by a formal method."
        },
        "xdm:channel": {
          "type": "string",
          "format": "uri",
          "title": "Communication Channel",
          "description": "A reference to the channel entity. The channel indicates where the dynamic content is intended to be delivered. The channel constraint is used to convey not only where the offer will be used but also to determine the content editor or validator that is used for the experience. See 'https://ns.adobe.com/xdm/channels/channel'"
        },
        "xdm:componentType": {
          "$ref": "https://ns.adobe.com/experience/offer-management/offer-representation#/definitions/content-component-type",
          "title": "Content Type",
          "description": "A constraint for the content that can be shown in the place described by this placement. Component Types are: image, html or plain text."
        },
        "xdm:contentTypes": {
          "type": "array",
          "items": {
            "type": "string",
            "title": "MIME Media Type",
            "description": "[Multipurpose Internet Mail Extensions (MIME)](https://tools.ietf.org/html/rfc2046)",
            "pattern": "\\w+\\/[-.\\w]+(?:\\+[-.\\w]+)?",
            "description": "A constraint for the media type of the components that is expected in that placement. There could be more than one media type possible for one component such as different image format."
          }
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/offer-placement"
    },
    {
      "required": ["xdm:name", "xdm:channel", "xdm:componentType"]
    }
  ]
}
