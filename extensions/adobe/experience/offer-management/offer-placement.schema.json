{
  "meta:license": [
    "Copyright 2018 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$schema": "http://json-schema.org/draft-06/schema#",
  "$id": "https://ns.adobe.com/experience/offer-management/offer-placement",
  "meta:extends": [
    "https://ns.adobe.com/xdm/data/record",
    "https://ns.adobe.com/experience/decisioning/placement"
  ],
  "meta:abstract": false,
  "meta:extensible": true,
  "type": "object",
  "title": "Offer Placement",
  "description": "A placement describes a location or place in a personalized message. It is used to set technical constraints for content that the personalization decision supplies. The placement also represents a request to produce certain types of metrics when an experience event is produced where this placement is involved. For instance the placement facilitates a personalized clickable image inside an email shown to an end-user. The placement may for instance request from the assembled experience that the click on its image gets reported in an experience event with a metric `https://ns.adobe.com/xdm/data/metrics/web/linkclicks` and a reference to this placement. ",
  "definitions": {
    "offer-placement": {
      "properties": {
        "xdm:componentType": {
          "$ref": "https://ns.adobe.com/experience/offer-management/content-component-type",
          "title": "Offer Content Component Type",
          "description": "A constraint for the content that can be shown in the place described by this placement. Offer Component Types are: image link, html or plain text, html template and text template."
        },
        "xdm:contentTypes": {
          "type": "array",
          "title": "Content Component Media Types",
          "description": "A constraint for the media type of the components that is expected in that placement. There could be more than one media type possible for one component such as different image format.",
          "items": {
            "type": "string",
            "title": "MIME Media Type",
            "pattern": "\\w+\\/[-.\\w]+(?:\\+[-.\\w]+)?",
            "description": "[Multipurpose Internet Mail Extensions (MIME)](https://tools.ietf.org/html/rfc2046)"
          }
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/offer-placement"
    },
    {
      "$ref": "https://ns.adobe.com/experience/decisioning/placement"
    },
    {
      "required": ["xdm:name", "xdm:channel", "xdm:componentType"]
    }
  ]
}
