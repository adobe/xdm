{
    "$id": "adobe/experience/campaign/feedbackevent",
    "$schema": "http://json-schema.org/draft-06/schema#",
    "title": "Adobe Delivery Feedback Events",
    "type": "object",
    "meta:extensible": true,
    "description": "Contains all delivery event fields.",
    "meta:status": "experimental",
    "meta:xdmType": "object",
    "properties": {
        "_experience": {
            "type": "object",
            "meta:xdmType": "object",
            "properties": {
                "campaign": {
                    "type": "object",
                    "meta:xdmType": "object",
                    "properties": {
                        "feedback": {
                            "properties": {
                                "type": {
                                    "title": "Feedback Type",
                                    "type": "string",
                                    "description": "The type of message event.",
                                    "meta:xdmType": "string",
                                    "meta:xdmField": "https://ns.adobe.com/experience/campaign/feedback/type"
                                },
                                "delivery": {
                                    "title": "The campaign activity originating a message to a recipient.",
                                    "type": "object",
                                    "meta:xdmType": "object",
                                    "properties": {
                                        "id": {
                                            "title": "Delivery ID",
                                            "type": "string",
                                            "description": "The campaign activity originating this message.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:id"
                                        },
                                        "campaignId": {
                                            "title": "Campaign Id",
                                            "type": "string",
                                            "description": "Campaign of which this delivery was a part.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:campaignId"
                                        },
                                        "from": {
                                            "title": "From",
                                            "type": "string",
                                            "description": "Address used as a from/sender/caller address. Depending on the communication channel, the `address` has a different format.\n\n  * `email`: an email address.\n  * `textMessage` or `phone`: a shortcode or phone number.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:from"
                                        },
                                        "type": {
                                            "title": "Delivery Type",
                                            "type": "string",
                                            "description": "Mode of delivery for the messages sent.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:type"
                                        },
                                        "label": {
                                            "title": "Delivery Label",
                                            "type": "string",
                                            "description": "A human-friendly name of the campaign activity which is originating this message.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:label"
                                        },
                                        "name": {
                                            "title": "Delivery Internal Name",
                                            "type": "string",
                                            "description": "A human-friendly identifier of the campaign activity which is originating this message.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:name"
                                        }
                                    },
                                    "meta:xdmField": "https://ns.adobe.com/experience/campaign/feedback/delivery"
                                },
                                "message": {
                                    "title": "A single message sent to a recipient.",
                                    "type": "object",
                                    "meta:xdmType": "object",
                                    "properties": {
                                        "id": {
                                            "title": "Message Identifier",
                                            "type": "string",
                                            "description": "Identifier of the message.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:id"
                                        },
                                        "_unqualified": {
                                            "subject": {
                                                "title": "Message Subject",
                                                "type": "string",
                                                "description": "Subject line of the message.",
                                                "meta:xdmType": "string",
                                                "meta:xdmField": "subject"
                                            },
                                            "size": {
                                                "title": "Message Size",
                                                "type": "integer",
                                                "description": "Size in bytes of the message.",
                                                "meta:xdmType": "int",
                                                "meta:xdmField": "size"
                                            },
                                            "recipient": {
                                                "title": "The recipient of this message",
                                                "type": "object",
                                                "meta:xdmType": "object",
                                                "properties": {
                                                    "to": {
                                                        "title": "To",
                                                        "type": "string",
                                                        "description": "Address used as a to/callee address. Depending on the communication channel, the `address` has a different format.\n\n  * `email`: an email address.\n  * `textMessage` or `phone`: a shortcode or phone number.",
                                                        "meta:xdmType": "string",
                                                        "meta:xdmField": "xdm:to"
                                                    },
                                                    "type": {
                                                        "title": "Type",
                                                        "type": "string",
                                                        "description": "Whether this message message event describes the BCC, CC or To recipient.",
                                                        "meta:xdmType": "string",
                                                        "meta:xdmField": "xdm:type"
                                                    }
                                                },
                                                "meta:xdmField": "recipient"
                                            }
                                        }
                                    },
                                    "meta:xdmField": "https://ns.adobe.com/experience/campaign/feedback/message"
                                },
                                "messageFailure": {
                                    "title": "Message Failure",
                                    "type": "object",
                                    "meta:xdmType": "object",
                                    "properties": {
                                        "canonicalReason": {
                                            "title": "Canonical Reason",
                                            "type": "string",
                                            "description": "Canonicalized text of the response returned by the remote server due to a failed delivery attempt.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:canonicalReason"
                                        },
                                        "reason": {
                                            "title": "Reason",
                                            "type": "string",
                                            "description": "Unmodified, exact response returned by the remote server due to a failed delivery attempt.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:reason"
                                        },
                                        "errorCode": {
                                            "title": "Error Code",
                                            "type": "string",
                                            "description": "Error code by which the remote server described a failed delivery attempt.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:errorCode"
                                        },
                                        "bounceType": {
                                            "title": "Bounce Type",
                                            "type": "string",
                                            "description": "Classifies whether it is a soft bounce or hard bounce.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:bounceType"
                                        },
                                        "bounceClass": {
                                            "title": "Bounce Class",
                                            "type": "string",
                                            "description": "Classification code for a given message.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:bounceClass"
                                        }
                                    },
                                    "meta:xdmField": "https://ns.adobe.com/experience/campaign/feedback/messageFailure"
                                },
                                "solutionContext": {
                                    "title": "Solution Context",
                                    "type": "array",
                                    "description": "List of solution specific key value pairs.",
                                    "meta:xdmType": "array",
                                    "items": {
                                        "$ref": "adobe/experience/analytics/keyvalue"
                                    },
                                    "meta:xdmField": "https://ns.adobe.com/experience/campaign/feedback/solutionContext"
                                },
                                "channel": {
                                    "title": "Delivery channel",
                                    "type": "object",
                                    "meta:xdmType": "object",
                                    "properties": {
                                        "type": {
                                            "title": "Channel Type",
                                            "type": "string",
                                            "description": "Classifies whether the channel is email, push, sms.",
                                            "meta:xdmType": "string",
                                            "meta:xdmField": "xdm:type"
                                        },
                                        "_unqualified": {
                                            "email": {
                                                "title": "E-mail Channel",
                                                "type": "object",
                                                "meta:xdmType": "object",
                                                "properties": {
                                                    "_unqualified": {
                                                        "interactions": {
                                                            "title": "User Interactions",
                                                            "type": "object",
                                                            "meta:xdmType": "object",
                                                            "properties": {
                                                                "spamType": {
                                                                    "title": "Spam Type",
                                                                    "type": "string",
                                                                    "description": "Type of spam report entered against this message (see RFC 5965 ยง 7.3).",
                                                                    "meta:xdmType": "string",
                                                                    "meta:xdmField": "xdm:spamType"
                                                                },
                                                                "reportedBy": {
                                                                    "title": "Reported By",
                                                                    "type": "string",
                                                                    "description": "E-mail Address of the entity reporting this message as spam.",
                                                                    "meta:xdmType": "string",
                                                                    "meta:xdmField": "xdm:reportedBy"
                                                                },
                                                                "reportTo": {
                                                                    "title": "Report To",
                                                                    "type": "string",
                                                                    "description": "E-mail Address to which this spam report is to be delivered.",
                                                                    "meta:xdmType": "string",
                                                                    "meta:xdmField": "xdm:reportTo"
                                                                },
                                                                "userAgent": {
                                                                    "title": "User Agent",
                                                                    "type": "string",
                                                                    "description": "Value of the browser's User-Agent header.",
                                                                    "meta:xdmType": "string",
                                                                    "meta:xdmField": "xdm:userAgent"
                                                                }
                                                            },
                                                            "meta:xdmField": "interactions"
                                                        },
                                                        "operationalContext": {
                                                            "title": "Operational Context",
                                                            "type": "object",
                                                            "meta:xdmType": "object",
                                                            "properties": {
                                                                "outboundIP": {
                                                                    "title": "IP Address",
                                                                    "type": "string",
                                                                    "description": "Outbound IP address of the customer used to deliver the message.",
                                                                    "meta:xdmType": "string",
                                                                    "meta:xdmField": "xdm:outboundIP"
                                                                },
                                                                "sendProtocol": {
                                                                    "title": "Send Protocol",
                                                                    "type": "string",
                                                                    "description": "Protocol by which the message is delivered.",
                                                                    "meta:xdmType": "string",
                                                                    "meta:xdmField": "xdm:sendProtocol"
                                                                },
                                                                "remoteIp": {
                                                                    "title": "IP Address",
                                                                    "type": "string",
                                                                    "description": "IP address of the host to which this message is delivered.",
                                                                    "meta:xdmType": "string",
                                                                    "meta:xdmField": "xdm:remoteIp"
                                                                },
                                                                "mtaHost": {
                                                                    "title": "Node Name",
                                                                    "type": "string",
                                                                    "description": "Name of the MTA Instance originating the events.",
                                                                    "meta:xdmType": "string",
                                                                    "meta:xdmField": "xdm:mtaHost"
                                                                },
                                                                "mtaIp": {
                                                                    "title": "Sending IP Address",
                                                                    "type": "string",
                                                                    "description": "IP address through which this message was sent.",
                                                                    "meta:xdmType": "string",
                                                                    "meta:xdmField": "xdm:mtaIp"
                                                                },
                                                                "queueTime": {
                                                                    "title": "Queue time",
                                                                    "type": "number",
                                                                    "description": "Delay, expressed in milliseconds, between this message's injection into SparkPost and its delivery to the receiving domain; that is, the length of time this message spent in the outgoing queue.",
                                                                    "meta:xdmType": "number",
                                                                    "meta:xdmField": "xdm:queueTime"
                                                                }
                                                            },
                                                            "meta:xdmField": "operationalContext"
                                                        }
                                                    }
                                                },
                                                "meta:xdmField": "email"
                                            }
                                        }
                                    },
                                    "meta:xdmField": "https://ns.adobe.com/experience/campaign/feedback/channel"
                                }
                            },
                            "type": "object",
                            "meta:xdmType": "object"
                        }
                    }
                }
            }
        },
        "retryCount": {
            "title": "Retry Count",
            "type": "integer",
            "description": "Number of failed attempts before the current event.",
            "meta:xdmType": "int",
            "meta:xdmField": "xdm:retryCount"
        }
    },
    "meta:xdmId": "https://ns.adobe.com/experience/campaign/feedbackevent",
    "meta:altId": "_experience.campaign.feedbackevent"
}