{
    "$id": "adobe/experience/decisioning/decisionevent.schema.json",
    "$schema": "http://json-schema.org/draft-06/schema#",
    "title": "XDM Decision Event",
    "type": "object",
    "meta:abstract": true,
    "meta:extensible": true,
    "description": "A decision event is used to capture observations about the outcome and context of a decision activity. The decision event captures information about how the decision made, when it was occurring, what options were proposed (chosen) and what contextual state existed that either influenced the decision or could be observed during the decision process. The decision event also captures the proposition ID, a globally unique identifier that can be used to correlate the decision to other events. DecisionEvents are not only relatable to Experience Events that impacted a decision but also to ExperienceEvents that are a direct response to a proposition. It is the expectation that applications reference the proposition ID in every experience event that was influenced by the propositions. A user profile's proposition-response history is maintained with these proposition IDs.",
    "meta:xdmType": "object",
    "meta:status": "experimental",
    "properties": {
        "_id": {
            "title": "Identifier",
            "type": "string",
            "format": "uri-reference",
            "description": "A unique identifier for the time-series event.",
            "meta:xdmType": "string",
            "meta:xdmField": "@id",
            "tagNumber": 1
        },
        "timestamp": {
            "title": "Timestamp",
            "type": "string",
            "format": "date-time",
            "description": "The time when an event or observation occurred.",
            "meta:xdmType": "date-time",
            "meta:xdmField": "xdm:timestamp",
            "tagNumber": 2
        },
        "eventType": {
            "title": "Event Type",
            "type": "string",
            "description": "The primary event type for this time-series record.",
            "meta:xdmType": "string",
            "meta:xdmField": "xdm:eventType",
            "tagNumber": 3
        },
        "identityMap": {
            "type": "object",
            "meta:xdmType": "map",
            "additionalProperties": {
                "type": "array",
                "meta:xdmType": "array",
                "items": {
                    "$ref": "../../../context/identityitem.schema.json",
                    "tagNumber": 1
                },
                "tagNumber": 1
            },
            "meta:xdmField": "xdm:identityMap",
            "tagNumber": 4
        },
        "_experience": {
            "type": "object",
            "meta:xdmType": "object",
            "properties": {
                "decisioning": {
                    "type": "object",
                    "meta:xdmType": "object",
                    "properties": {
                        "propositionID": {
                            "title": "Proposition Identifier",
                            "type": "string",
                            "format": "uri-reference",
                            "description": "An identity for the proposition entity associated with an \"XDM Decision Event\". A single decision event can propose multiple options for a set of activities at once, one for each activity involved. It is the expectation that applications reference this \"propositionID\" in every experience event that was influenced by the set of propositions. A profile's proposition-response history is maintained with these proposition identifiers.",
                            "meta:xdmType": "string",
                            "meta:xdmField": "https://ns.adobe.com/experience/decisioning/propositionID",
                            "tagNumber": 1
                        },
                        "propositionDetails": {
                            "title": "Proposition Details.",
                            "type": "array",
                            "description": "Details about the results of the decision. An array providing the output of a single decision event, one proposition per activity parameter in the request.",
                            "meta:xdmType": "array",
                            "items": {
                                "$ref": "../../../adobe/experience/decisioning/proposition-detail.schema.json",
                                "tagNumber": 1
                            },
                            "meta:xdmField": "https://ns.adobe.com/experience/decisioning/propositionDetails",
                            "tagNumber": 2
                        }
                    },
                    "required": [
                        "propositionID"
                    ],
                    "tagNumber": 1
                }
            },
            "required": [
                "decisioning"
            ],
            "tagNumber": 5
        }
    },
    "meta:xdmId": "https://ns.adobe.com/experience/decisioning/decisionevent",
    "meta:altId": "_experience.decisioning.decisionevent",
    "required": [
        "_id",
        "timestamp",
        "_experience"
    ]
}