{
  "meta:license": [
    "Copyright 2019 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$schema": "http://json-schema.org/draft-06/schema#",
  "$id": "https://ns.adobe.com/experience/decisioning/option-selection",
  "meta:abstract": true,
  "meta:extensible": true,
  "type": "object",
  "title": "Option Selection",
  "description": "An option selection is a component of a decision criteria that defines the applicability constraints. The option selection is either a (reusable) filter rule or a list that directly specifies the options. Usually the option is included or excluded based on tags or characteristics of the option, but the filter rule can consider any context data as long as it can be described by an XDM schema. The filter must evaluate to true or false for any given option. A simplified form of an option selection criteria is an explicit listing of the options without a separate filter query. Either an option list or an option filter rule can be specified.",
  "definitions": {
    "option-selection-datatype": {
      "type": "object",
      "properties": {
        "xdm:filter": {
          "type": "string",
          "format": "uri-reference",
          "title": "Option Filter Rule",
          "description": "The reference to a decision rule that evaluates to true or false for a given profile and/or other given contextual XDM objects. The rule is used to decide if the option is eligible for a given profile and context. The value is the URI (@id) of the decision rule that is referenced. See schema https://ns.adobe.com/experience/decision/rule"
        },
        "xdm:options": {
          "type": "array",
          "title": "Option List",
          "description": "A list that directly specifies the options without evaluating a rule. Either an option list or an option filter rule can be specified.",
          "items": {
            "type": "string",
            "format": "uri-reference",
            "description": "An identifier of an XDM entity. The value value refers to an `@id` property of option entities."
          }
        },
        "xdm:description": {
          "type": "string",
          "title": "Description",
          "description": "Option selection description. It is used to convey human readable intentions on how or why this option selection was constructed and/or what option will match."
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/option-selection-datatype"
    }
  ]
}
