{
  "meta:license": [
    "Copyright 2020 Adobe. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$id": "https://ns.adobe.com/mixins/mobile-lifecycle-details",
  "$schema": "http://json-schema.org/draft-06/schema#",
  "title": "Mobile Lifecycle Details",
  "type": "object",
  "description": "Application lifecycle information recorded via an ExperienceEvent that is specific to the Mobile channel. Includes field definitions for automatically collected data by the AEP Edge mobile extension library.",
  "meta:extensible": true,
  "meta:abstract": true,
  "meta:intendedToExtend": ["https://ns.adobe.com/xdm/context/experienceevent"],
  "definitions": {
    "mobile-lifecycle-details": {
      "properties": {
        "xdm:mobileApplication": {
          "title": "Mobile Application",
          "$ref": "https://ns.adobe.com/xdm/datatypes/mobile-application",
          "description": "Application information related to an ExperienceEvent, including the name of the application, app version, launches, and closures."
        },
        "xdm:device": {
          "title": "Device",
          "$ref": "https://ns.adobe.com/xdm/context/device",
          "description": "Information about the mobile device the application lifecycle event observation occurred in, including device type and model."
        }
      }
    },
    "environment": {
      "properties": {
        "xdm:environment": {
          "title": "Environment",
          "$ref": "https://ns.adobe.com/xdm/context/environment",
          "description": "Information about the surrounding situation the application lifeycyle event observation occurred in, specifically detailing transitory information such as the network or software versions."
        }
      }
    },
    "environment-type": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:type": {
              "title": "Type",
              "type": "string",
              "description": "The type of the application environment.",
              "enum": ["browser", "application", "iot", "external", "widget"],
              "meta:enum": {
                "browser": "Browser",
                "application": "Application",
                "iot": "Internet of things",
                "external": "External system",
                "widget": "Application extension"
              }
            }
          }
        }
      }
    },
    "environment-operatingSystem": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:operatingSystem": {
              "title": "Operating system",
              "type": "string",
              "description": "The name of the operating system used when the observation was made. The attribute should not contain any version information such as '10.5.3', but instead contain 'edition' designations such as 'Ultimate' or 'Professional'."
            }
          }
        }
      }
    },
    "environment-operatingSystemVersion": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:operatingSystemVersion": {
              "title": "Operating system version",
              "type": "string",
              "description": "The full version identifier for the operating system used when the observation was made. Versions are generally numerically composed but may be in a vendor defined format."
            }
          }
        }
      }
    },
    "environment-operatingSystemVendor": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:operatingSystemVendor": {
              "title": "Operating system vendor",
              "type": "string",
              "description": "The name of the operating system vendor used when the observation was made."
            }
          }
        }
      }
    },
    "environment-colorDepth": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:colorDepth": {
              "title": "Color depth",
              "type": "integer",
              "description": "The number of bits used for each color component of a single pixel.",
              "minimum": 0
            }
          }
        }
      }
    },
    "environment-viewportHeight": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:viewportHeight": {
              "title": "Viewport height",
              "type": "integer",
              "description": "The vertical size in pixels of the window the experience was displayed inside. For a web view event, the browser viewport height.",
              "minimum": 0
            }
          }
        }
      }
    },
    "environment-viewportWidth": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:viewportWidth": {
              "title": "Viewport width",
              "type": "integer",
              "description": "The horizontal size in pixels of the window the experience was displayed inside. For a web view event, the browser viewport width.",
              "minimum": 0
            }
          }
        }
      }
    },
    "environment-duration": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:duration": {
              "title": "Duration",
              "type": "integer",
              "description": "The number of milliseconds that the user was on the screen.",
              "minimum": 0
            }
          }
        }
      }
    },
    "environment-viewedScreen": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:viewedScreen": {
              "title": "Viewed Screen",
              "type": "string",
              "description": "The friendly name assigned to the screen that the user was on."
            }
          }
        }
      }
    },
    "environment-previousScreen": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:previousScreen": {
              "title": "Previous Screen",
              "type": "string",
              "description": "The frinedly name assigned to the screen the user was on prior to the viewedScreen."
            }
          }
        }
      }
    },
    "environment-connectionType": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:connectionType": {
              "title": "Connection type",
              "type": "string",
              "description": "Internet connection type.",
              "enum": [
                "dialup",
                "isdn",
                "bisdn",
                "dsl",
                "cable",
                "wireless_wifi",
                "mobile",
                "mobile_edge",
                "mobile_2g",
                "mobile_3g",
                "mobile_lte",
                "t1",
                "t3",
                "oc3",
                "lan",
                "modem"
              ],
              "meta:enum": {
                "dialup": "Dial-up",
                "isdn": "ISDN",
                "bisdn": "BISDN",
                "dsl": "DSL",
                "cable": "Cable",
                "wireless_wifi": "Wireless wifi",
                "mobile": "Mobile",
                "mobile_edge": "Mobile Edge",
                "mobile_gprs": "Mobile GPRS",
                "mobile_2g": "Mobile 2G",
                "mobile_3g": "Mobile 3G",
                "mobile_lte": "Mobile LTE",
                "t1": "T1",
                "t3": "T3",
                "oc3": "OC3",
                "lan": "LAN",
                "modem": "Modem"
              }
            }
          }
        }
      }
    },
    "environment-carrier": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:carrier": {
              "title": "Mobile network carrier",
              "type": "string",
              "description": "A mobile network carrier or MNO, also known as a wireless service provider, wireless carrier, cellular company, or mobile network carrier, is a provider of services wireless communications that owns or controls all the elements necessary to sell and deliver services to an end user."
            }
          }
        }
      }
    },
    "environment-ipV4": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:ipV4": {
              "title": "IPv4",
              "type": "string",
              "format": "ipv4",
              "description": "The numerical label assigned to a device participating in a computer network that uses the Internet Protocol for communication. "
            }
          }
        }
      }
    },
    "environment-ipV6": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:ipV6": {
              "title": "IPv6",
              "type": "string",
              "format": "ipv6",
              "description": "The numerical label assigned to a device participating in a computer network that uses the Internet Protocol for communication. "
            }
          }
        }
      }
    },
    "environment-domain": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:domain": {
              "title": "Domain",
              "type": "string",
              "description": "The domain of the users ISP."
            }
          }
        }
      }
    },
    "environment-ISP": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "xdm:ISP": {
              "title": "Internet service provider",
              "type": "string",
              "description": "The name of the user's internet service provider."
            }
          }
        }
      }
    },
    "environment-language": {
      "properties": {
        "xdm:environment": {
          "type": "object",
          "properties": {
            "dc:language": {
              "meta:usereditable": false,
              "title": "Language",
              "type": "string",
              "pattern": "^(((([A-Za-z]{2,3}(-([A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?)|[A-Za-z]{4}|[A-Za-z]{5,8})(-([A-Za-z]{4}))?(-([A-Za-z]{2}|[0-9]{3}))?(-([A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(-([0-9A-WY-Za-wy-z](-[A-Za-z0-9]{2,8})+))*(-(x(-[A-Za-z0-9]{1,8})+))?)|(x(-[A-Za-z0-9]{1,8})+)|((en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang)))$",
              "description": "The language of the environment to represent the user's linguistic, geographical, or cultural preferences for data presentation.\nLanguages are specified in language code as defined in [IETF RFC 3066](https://www.ietf.org/rfc/rfc3066.txt), which is part of BCP 47, which is used elsewhere in XDM.",
              "examples": ["en-US", "pt-BR", "es-ES"]
            }
          }
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "https://ns.adobe.com/xdm/common/extensible#/definitions/@context"
    },
    {
      "$ref": "#/definitions/mobile-lifecycle-details",
      "$ref": "#/definitions/environment"
    }
  ],
  "meta:status": "experimental"
}
